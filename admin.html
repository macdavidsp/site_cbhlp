<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Painel Administrativo</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    #loginArea, #status, table {
      margin-top: 20px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
    }

    th {
      background-color: #f0f0f0;
    }

    #status {
      font-weight: bold;
    }

    input[type="password"], button {
      padding: 10px;
      font-size: 1em;
    }

    button {
      background-color: #00796b;
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #004d40;
    }
  </style>
</head>
<body>
  <header>
    <h1>Painel Administrativo</h1>
    <nav>
      <ul>
        <li><a href="index.html">In√≠cio</a></li>
        <li><a href="cadastro.html">Registro</a></li>
        <li><a href="verificar.html">Verifica√ß√£o</a></li>
        <li><a href="quorum.html">Qu√≥rum</a></li>
        <li><a href="admin.html">Admin</a></li>
      </ul>
    </nav>
  </header>
  <main>
    <div id="loginArea">
      <input type="password" id="senha" placeholder="Digite a senha de acesso" />
      <button onclick="verificarSenha()">Entrar</button>
    </div>

    <p id="status" style="display:none;">üîÑ Carregando registros de hoje...</p>

    <table id="tabelaPresencas" style="display:none;">
      <thead>
        <tr>
          <th>Nome</th>
          <th>CPF</th>
          <th>Institui√ß√£o</th>
          <th>Setor</th>
          <th>Representa√ß√£o</th>
          <th>C√≥digo</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </main>

  <script>
    const tabela = document.querySelector("#tabelaPresencas tbody");
    const status = document.getElementById("status");
    const tabelaPresencas = document.getElementById("tabelaPresencas");
    const loginArea = document.getElementById("loginArea");
    const API_URL = "https://script.google.com/a/macros/mail.uft.edu.br/s/AKfycbwxsGyjekkgQx-OZbSrAufOYiSCPCWBFmlBS2GhnzP78I2EQCkJu9LPmbl3cWVO64jBSw/exec";

    function verificarSenha() {
      const senha = document.getElementById("senha").value.trim();
      const senhaCorreta = "cbhlp2025"; // üîê defina sua senha aqui

      if (senha === senhaCorreta) {
        loginArea.style.display = "none";
        status.style.display = "block";
        tabelaPresencas.style.display = "table";
        carregarPresencas();
      } else {
        alert("Senha incorreta. Acesso negado.");
      }
    }

    async function carregarPresencas() {
      try {
        const res = await fetch(API_URL);
        const dados = await res.json();
        const hoje = new Date().toISOString().split("T")[0];
        const presencasHoje = dados.filter(p => p[0] === hoje);

        if (presencasHoje.length === 0) {
          status.textContent = "‚ö†Ô∏è Nenhuma presen√ßa registrada hoje.";
          return;
        }

        presencasHoje.forEach(p => {
          const linha = document.createElement("tr");
          linha.innerHTML = `
            <td>${p[1]}</td>
            <td>${p[2]}</td>
            <td>${p[3]}</td>
            <td>${p[4]}</td>
            <td>${p[5]}</td>
            <td>${p[6]}</td>
          `;
          tabela.appendChild(linha);
        });

        status.textContent = `‚úÖ Total de presen√ßas hoje: ${presencasHoje.length}`;
        status.style.color = "green";
      } catch (err) {
        status.textContent = "‚ùå Erro ao carregar os dados.";
        status.style.color = "red";
      }
    }
  </script>
</body>
</html>